<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Check for alluvial structure and convert between alluvial formats — alluvial-data • ggalluvial</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Check for alluvial structure and convert between alluvial formats — alluvial-data" />

<meta property="og:description" content="Alluvial diagrams consist of multiple horizontally-distributed columns (axes)
representing factor variables, vertical divisions (strata) of these axes
representing these variables' values; and splines (alluvial flows) connecting
vertical subdivisions (lodes) within strata of adjacent axes representing
subsets or amounts of observations that take the corresponding values of the
corresponding variables. This function checks a data frame for either of two
types of alluvial structure:" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggalluvial</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.10.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ggalluvial.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/labels.html">Labeling small strata</a>
    </li>
    <li>
      <a href="../articles/order-rectangles.html">The Order of the Rectangles</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Check for alluvial structure and convert between alluvial formats</h1>
    
    <div class="hidden name"><code>alluvial-data.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Alluvial diagrams consist of multiple horizontally-distributed columns (axes)
representing factor variables, vertical divisions (strata) of these axes
representing these variables' values; and splines (alluvial flows) connecting
vertical subdivisions (lodes) within strata of adjacent axes representing
subsets or amounts of observations that take the corresponding values of the
corresponding variables. This function checks a data frame for either of two
types of alluvial structure:</p>
    
    </div>

    <pre class="usage"><span class='fu'>is_lodes_form</span>(<span class='no'>data</span>, <span class='no'>key</span>, <span class='no'>value</span>, <span class='no'>id</span>, <span class='kw'>weight</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>logical</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>silent</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>is_alluvia_form</span>(<span class='no'>data</span>, <span class='no'>...</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>weight</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>logical</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>silent</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>to_lodes_form</span>(<span class='no'>data</span>, <span class='no'>...</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"x"</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>"stratum"</span>,
  <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"alluvium"</span>, <span class='kw'>diffuse</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>discern</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>to_alluvia_form</span>(<span class='no'>data</span>, <span class='no'>key</span>, <span class='no'>value</span>, <span class='no'>id</span>, <span class='kw'>distill</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame.</p></td>
    </tr>
    <tr>
      <th>key, value, id</th>
      <td><p>In <code>to_lodes_form</code>, handled as in
<code><a href='https://tidyr.tidyverse.org/reference/gather.html'>tidyr::gather()</a></code> and used to name the new axis (key), stratum
(value), and alluvium (identifying) variables. In <code>to_alluvia_form</code>,
handled as in <code><a href='https://tidyr.tidyverse.org/reference/spread.html'>tidyr::spread()</a></code> and used to identify the fields
of <code>data</code> to be used as the axis (key), stratum (value), and alluvium
(identifying) variables.</p></td>
    </tr>
    <tr>
      <th>weight</th>
      <td><p>Optional field of <code>data</code>, handled using
<code><a href='https://rlang.r-lib.org/reference/quotation.html'>rlang::enquo()</a></code>, to be used as heights or depths of the alluvia
or lodes.</p></td>
    </tr>
    <tr>
      <th>logical</th>
      <td><p>Deprecated. Whether to return a logical value or a character
string indicating the type of alluvial structure ("none", "lodes", or
"alluvia").</p></td>
    </tr>
    <tr>
      <th>silent</th>
      <td><p>Whether to print messages.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Used in <code>is_alluvia_form</code> and <code>to_lodes_form</code> as in
<code><a href='https://dplyr.tidyverse.org/reference/select.html'>dplyr::select()</a></code> to determine axis variables, as an alternative
to <code>axes</code>. Ignored when <code>axes</code> is provided.</p></td>
    </tr>
    <tr>
      <th>axes</th>
      <td><p>In <code>*_alluvia_form</code>, handled as in
<code><a href='https://dplyr.tidyverse.org/reference/select.html'>dplyr::select()</a></code> and used to identify the field(s) of
<code>data</code> to be used as axes.</p></td>
    </tr>
    <tr>
      <th>diffuse</th>
      <td><p>Fields of <code>data</code>, handled using
<code><a href='https://www.rdocumentation.org/packages/tidyselect/topics/vars_select'>tidyselect::vars_select()</a></code>, to merge into the reshapen data by
<code>id</code>. They must be a subset of the axis variables. Alternatively, a
logical value indicating whether to merge all (<code>TRUE</code>) or none
(<code>FALSE</code>) of the axis variables.</p></td>
    </tr>
    <tr>
      <th>discern</th>
      <td><p>Logical value indicating whether to suffix values of the
variables used as axes that appear at more than one variable in order to
distinguish their factor levels. This forces the levels of the combined
factor variable <code>value</code> to be in the order of the axes.</p></td>
    </tr>
    <tr>
      <th>distill</th>
      <td><p>A logical value indicating whether to include variables, other
than those passed to <code>key</code> and <code>value</code>, that vary within values
of <code>id</code>. Alternatively, a function (or its name) to be used to distill
each such variable to a single value. In addition to existing functions,
<code>distill</code> accepts the character values <code>"first"</code> (used if
<code>distill</code> is <code>TRUE</code>), <code>"last"</code>, and <code>"most"</code> (which
returns the modal value).</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <ul>
<li><p>One row per <strong>lode</strong>, wherein each row encodes a subset or amount of
observations having a specific profile of axis values, a <code>key</code> field
encodes the axis, a <code>value</code> field encodes the value within each axis, and a
<code>id</code> column identifies multiple lodes corresponding to the same subset or
amount of observations. <code>is_lodes_form</code> tests for this structure.</p></li>
<li><p>One row per <strong>alluvium</strong>, wherein each row encodes a subset or amount of
observations having a specific profile of axis values and a set <code>axes</code> of
fields encodes its values at each axis variable. <code>is_alluvia_form</code> tests
for this structure.</p></li>
</ul>
    <p><code>to_lodes_form</code> takes a data frame with several designated variables to
be used as axes in an alluvial diagram, and reshapes the data frame so that
the axis variable names constitute a new factor variable and their values
comprise another. Other variables' values will be repeated, and a
row-grouping variable can be introduced. This function invokes
<code><a href='https://tidyr.tidyverse.org/reference/gather.html'>tidyr::gather()</a></code>.</p>
<p><code>to_alluvia_form</code> takes a data frame with axis and axis value variables
to be used in an alluvial diagram, and reshape the data frame so that the
axes constitute separate variables whose values are given by the value
variable. This function invokes <code><a href='https://tidyr.tidyverse.org/reference/spread.html'>tidyr::spread()</a></code>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other alluvial data manipulation: <code><a href='self-adjoin.html'>self-adjoin</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Titanic data in alluvia format</span>
<span class='no'>titanic_alluvia</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.data.frame'>as.data.frame</a></span>(<span class='no'>Titanic</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>titanic_alluvia</span>)</div><div class='output co'>#&gt;   Class    Sex   Age Survived Freq
#&gt; 1   1st   Male Child       No    0
#&gt; 2   2nd   Male Child       No    0
#&gt; 3   3rd   Male Child       No   35
#&gt; 4  Crew   Male Child       No    0
#&gt; 5   1st Female Child       No    0
#&gt; 6   2nd Female Child       No    0</div><div class='input'><span class='fu'>is_alluvia_form</span>(<span class='no'>titanic_alluvia</span>,
                <span class='kw'>weight</span> <span class='kw'>=</span> <span class='st'>"Freq"</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='co'># Titanic data in lodes format</span>
<span class='no'>titanic_lodes</span> <span class='kw'>&lt;-</span> <span class='fu'>to_lodes_form</span>(<span class='no'>titanic_alluvia</span>,
                               <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"x"</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>"stratum"</span>, <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"alluvium"</span>,
                               <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>4</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>titanic_lodes</span>)</div><div class='output co'>#&gt;   Freq alluvium     x stratum
#&gt; 1    0        1 Class     1st
#&gt; 2    0        2 Class     2nd
#&gt; 3   35        3 Class     3rd
#&gt; 4    0        4 Class    Crew
#&gt; 5    0        5 Class     1st
#&gt; 6    0        6 Class     2nd</div><div class='input'><span class='fu'>is_lodes_form</span>(<span class='no'>titanic_lodes</span>,
              <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"x"</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>"stratum"</span>, <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"alluvium"</span>,
              <span class='kw'>weight</span> <span class='kw'>=</span> <span class='st'>"Freq"</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='co'># again in lodes format, this time diffusing the `Class` variable</span>
<span class='no'>titanic_lodes2</span> <span class='kw'>&lt;-</span> <span class='fu'>to_lodes_form</span>(<span class='no'>titanic_alluvia</span>,
                                <span class='kw'>key</span> <span class='kw'>=</span> <span class='no'>variable</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='no'>value</span>,
                                <span class='kw'>id</span> <span class='kw'>=</span> <span class='no'>passenger</span>,
                                <span class='fl'>1</span>:<span class='fl'>3</span>, <span class='kw'>diffuse</span> <span class='kw'>=</span> <span class='no'>Class</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>titanic_lodes2</span>)</div><div class='output co'>#&gt;   passenger Class Survived Freq variable value
#&gt; 1         1   1st       No    0    Class   1st
#&gt; 2         1   1st       No    0      Sex  Male
#&gt; 3         1   1st       No    0      Age Child
#&gt; 4         2   2nd       No    0    Class   2nd
#&gt; 5         2   2nd       No    0      Sex  Male
#&gt; 6         2   2nd       No    0      Age Child</div><div class='input'><span class='fu'>is_lodes_form</span>(<span class='no'>titanic_lodes2</span>,
              <span class='kw'>key</span> <span class='kw'>=</span> <span class='no'>variable</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='no'>value</span>, <span class='kw'>id</span> <span class='kw'>=</span> <span class='no'>passenger</span>,
              <span class='kw'>weight</span> <span class='kw'>=</span> <span class='no'>Freq</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># curriculum data in lodes format</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>majors</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>majors</span>)</div><div class='output co'>#&gt;   student semester curriculum
#&gt; 1       1    CURR1   Painting
#&gt; 2       2    CURR1   Painting
#&gt; 3       6    CURR1   Sculpure
#&gt; 4       8    CURR1   Painting
#&gt; 5       9    CURR1   Sculpure
#&gt; 6      10    CURR1   Painting</div><div class='input'><span class='fu'>is_lodes_form</span>(<span class='no'>majors</span>,
              <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"semester"</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>"curriculum"</span>, <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"student"</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='co'># curriculum data in alluvia format</span>
<span class='no'>majors_alluvia</span> <span class='kw'>&lt;-</span> <span class='fu'>to_alluvia_form</span>(<span class='no'>majors</span>,
                                  <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"semester"</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>"curriculum"</span>,
                                  <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"student"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>majors_alluvia</span>)</div><div class='output co'>#&gt;   student    CURR1       CURR3       CURR5    CURR7    CURR9   CURR11   CURR13
#&gt; 1       1 Painting    Painting    Painting Painting Painting Painting Painting
#&gt; 2       2 Painting    Painting    Painting Painting Painting Painting     &lt;NA&gt;
#&gt; 3       6 Sculpure    Sculpure    Painting Painting Painting Painting Painting
#&gt; 4       8 Painting    Painting    Painting Painting     &lt;NA&gt; Painting Painting
#&gt; 5       9 Sculpure Art History Art History Painting Painting Painting Painting
#&gt; 6      10 Painting    Painting    Painting Painting Painting Painting     &lt;NA&gt;
#&gt;     CURR15
#&gt; 1 Painting
#&gt; 2     &lt;NA&gt;
#&gt; 3 Painting
#&gt; 4 Painting
#&gt; 5 Painting
#&gt; 6     &lt;NA&gt;</div><div class='input'><span class='fu'>is_alluvia_form</span>(<span class='no'>majors_alluvia</span>, <span class='kw pkg'>tidyselect</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/tidyselect/topics/select_helpers'>starts_with</a></span>(<span class='st'>"CURR"</span>))</div><div class='output co'>#&gt; <span class='message'>Missing alluvia for some stratum combinations.</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># distill variables that vary within `id` values</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></span>(<span class='fl'>1</span>)
<span class='no'>majors</span>$<span class='no'>hypo_grade</span> <span class='kw'>&lt;-</span> <span class='no'>LETTERS</span>[<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fl'>5</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>majors</span>), <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)]
<span class='no'>majors_alluvia2</span> <span class='kw'>&lt;-</span> <span class='fu'>to_alluvia_form</span>(<span class='no'>majors</span>,
                                   <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"semester"</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>"curriculum"</span>,
                                   <span class='kw'>id</span> <span class='kw'>=</span> <span class='st'>"student"</span>,
                                   <span class='kw'>distill</span> <span class='kw'>=</span> <span class='st'>"most"</span>)</div><div class='output co'>#&gt; <span class='message'>Distilled variables: hypo_grade</span></div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>majors_alluvia2</span>)</div><div class='output co'>#&gt;   student hypo_grade    CURR1       CURR3       CURR5    CURR7    CURR9
#&gt; 1       1          B Painting    Painting    Painting Painting Painting
#&gt; 2       2          B Painting    Painting    Painting Painting Painting
#&gt; 3       6          C Sculpure    Sculpure    Painting Painting Painting
#&gt; 4       8          B Painting    Painting    Painting Painting     &lt;NA&gt;
#&gt; 5       9          B Sculpure Art History Art History Painting Painting
#&gt; 6      10          B Painting    Painting    Painting Painting Painting
#&gt;     CURR11   CURR13   CURR15
#&gt; 1 Painting Painting Painting
#&gt; 2 Painting     &lt;NA&gt;     &lt;NA&gt;
#&gt; 3 Painting Painting Painting
#&gt; 4 Painting Painting Painting
#&gt; 5 Painting Painting Painting
#&gt; 6 Painting     &lt;NA&gt;     &lt;NA&gt;</div><div class='input'>
<span class='co'># options to distinguish strata at different axes</span>
<span class='no'>gg</span> <span class='kw'>&lt;-</span> <span class='fu'>ggplot</span>(<span class='no'>majors_alluvia</span>,
             <span class='fu'>aes</span>(<span class='kw'>axis1</span> <span class='kw'>=</span> <span class='no'>CURR1</span>, <span class='kw'>axis2</span> <span class='kw'>=</span> <span class='no'>CURR7</span>, <span class='kw'>axis3</span> <span class='kw'>=</span> <span class='no'>CURR13</span>))
<span class='no'>gg</span> +
  <span class='fu'><a href='geom_alluvium.html'>geom_alluvium</a></span>(<span class='fu'>aes</span>(<span class='kw'>fill</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/factor'>as.factor</a></span>(<span class='no'>student</span>)), <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>2</span>/<span class='fl'>5</span>, <span class='kw'>discern</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) +
  <span class='fu'><a href='geom_stratum.html'>geom_stratum</a></span>(<span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>2</span>/<span class='fl'>5</span>, <span class='kw'>discern</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) +
  <span class='fu'>geom_text</span>(<span class='kw'>stat</span> <span class='kw'>=</span> <span class='st'>"stratum"</span>, <span class='kw'>discern</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>label.strata</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='img'><img src='alluvial-data-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='no'>gg</span> +
  <span class='fu'><a href='geom_alluvium.html'>geom_alluvium</a></span>(<span class='fu'>aes</span>(<span class='kw'>fill</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/factor'>as.factor</a></span>(<span class='no'>student</span>)), <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>2</span>/<span class='fl'>5</span>, <span class='kw'>discern</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'><a href='geom_stratum.html'>geom_stratum</a></span>(<span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>2</span>/<span class='fl'>5</span>, <span class='kw'>discern</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'>geom_text</span>(<span class='kw'>stat</span> <span class='kw'>=</span> <span class='st'>"stratum"</span>, <span class='kw'>discern</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>label.strata</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='img'><img src='alluvial-data-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># warning when inappropriate</span>
<span class='fu'>ggplot</span>(<span class='no'>majors</span>[<span class='no'>majors</span>$<span class='no'>semester</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/paste'>paste0</a></span>(<span class='st'>"CURR"</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>7</span>, <span class='fl'>13</span>)), ],
       <span class='fu'>aes</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>semester</span>, <span class='kw'>stratum</span> <span class='kw'>=</span> <span class='no'>curriculum</span>, <span class='kw'>alluvium</span> <span class='kw'>=</span> <span class='no'>student</span>,
           <span class='kw'>label</span> <span class='kw'>=</span> <span class='no'>curriculum</span>)) +
  <span class='fu'><a href='geom_alluvium.html'>geom_alluvium</a></span>(<span class='fu'>aes</span>(<span class='kw'>fill</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/factor'>as.factor</a></span>(<span class='no'>student</span>)), <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>2</span>/<span class='fl'>5</span>, <span class='kw'>discern</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) +
  <span class='fu'><a href='geom_stratum.html'>geom_stratum</a></span>(<span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>2</span>/<span class='fl'>5</span>, <span class='kw'>discern</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) +
  <span class='fu'>geom_text</span>(<span class='kw'>stat</span> <span class='kw'>=</span> <span class='st'>"stratum"</span>, <span class='kw'>discern</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Data is already in lodes format, so `discern` will be ignored.</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Data is already in lodes format, so `discern` will be ignored.</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Data is already in lodes format, so `discern` will be ignored.</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 1 rows containing missing values (geom_text).</span></div><div class='img'><img src='alluvial-data-3.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jason Cory Brunson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

